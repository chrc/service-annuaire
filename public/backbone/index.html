<!DOCTYPE html>
<html>
<head>
    <title>Etablissement with backbone model </title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    
    
</head>
<body>
    <div class= "container">
        <h1> Etablissement Manager </h1>
        <hr/>
        <div class= "page">
            <div id='kb_collection'>
                <ul data-bind="foreach: etablissements">
                    <li><input type="text" data-bind="value: nom"></li>
                </ul>
          
            </div>

            <div id='jqxWidget'>
                <!--
                <div style="margin-bottom: 10px;">
                    <input id="addButton" type="button" data-bind="click: addItem, jqxButton: {theme: getTheme()}" value="Add Item" />
                    <input id="removeButton" type="button" data-bind="click: removeItem, jqxButton: {theme: getTheme()}" value="Remove Item" />
                    <input id="updateButton" type="button" data-bind="click: updateItem, jqxButton: {theme: getTheme()}" value="Update Item" />
                    <div data-bind="jqxCheckBox: {checked: disabled, theme: getTheme()}" style='margin-top: 5px;' id="checkBox">Disabled</div>
                </div>
                -->
                <div data-bind="jqxGrid: {source: etablissements, autoheight: true,
                        theme: 'energyblue',
                        editable: true,
                        selectionmode: 'singlecell',
                        columns: [
                            { text: 'Id', dataField: 'id', width: 200 },
                            { text: 'CodeUAI', dataField: 'code_uai', width: 200, cellsalign: 'right' },
                            { text: 'NOM', dataField: 'nom', width: 200, cellsformat: 'c2', cellsalign: 'right' }
                        ]}" id="jqxgrid">
                </div>
                <table style="margin-top: 20px;">
                    <tbody data-bind="foreach: etablissements">
                        <tr>
                            <td data-bind="text: id"></td>
                            <td data-bind="text: code_uai"></td>
                            <td data-bind="text: nom"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    <script type="text/javascript" src="js/knockout-2.2.0.js"></script>
    <script type="text/javascript" src="js/knockback.min.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxdata.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxgrid.selection.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxgrid.edit.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxknockout.js"></script>
    <script type="text/javascript" src="js/jqwidgets/jqxcheckbox.js"></script>

    <script>

    $(document).ready(function(){ 
        var Etablissements = Backbone.Collection.extend({
            url: "/etablissement"
        });
        //var Etablissements = new Backbone.Collection([{id:1, nom:'college1'}, {id: 2 , nom: 'college2'}]);
        etabs = new Etablissements();
        etabs.fetch(); 
        console.log(etabs);

        //var ess = Backbone.Collection([{id: 1,  nom: "college1"}, {id: 2,  nom: "college2"}]); 
        //Etablissements.fetch();  
        var etab_model = {
            etablissements: new kb.collectionObservable(etabs), 
        };

        console.log(etab_model); 
        ko.applyBindings(etab_model);
        });  

    </script>

    
</body>
</html>
